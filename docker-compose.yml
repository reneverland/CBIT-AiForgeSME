# â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
# CBIT-FrontAiForge Docker Compose é…ç½®
# 
# v4.0 æ–°ç‰¹æ€§:
# - å…¨æ–°UIè®¾è®¡ï¼ˆæœªæ¥æ„Ÿæ ¡å›­åŠ©æ‰‹ç•Œé¢ï¼‰
# - Logo + CBITæ–‡å­—ï¼ˆPacificoå­—ä½“ï¼‰
# - æ·±è‰²å¯¼èˆªæ  + æ¨¡å‹å¾½ç«  "CBIT-Elite v 4.0"
# - æ¶ˆæ¯æ°”æ³¡è®¾è®¡ï¼ˆå°å­—ä½“ï¼Œç´«è‰²+ç™½è‰²ï¼‰
# - åé¦ˆæœºåˆ¶ï¼ˆğŸ‘ ğŸ‘ æŒ‰é’®ï¼‰
# - Footerï¼ˆGitHubå¾½ç«  + CBITå¼€å‘æ ‡è¯† + å…è´£å£°æ˜ï¼‰
# â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

services:
  frontaiforge:
    build:
      context: .
      dockerfile: Dockerfile.host
    container_name: cbit_frontaiforge
    network_mode: "host"  # ä½¿ç”¨å®¿ä¸»æœºç½‘ç»œæ¨¡å¼
    restart: unless-stopped
    
    # ç¯å¢ƒå˜é‡é…ç½®
    # é»˜è®¤ä½¿ç”¨ .env.localï¼ˆå±€åŸŸç½‘ç¯å¢ƒï¼‰
    # éƒ¨ç½²åˆ°å¤–éƒ¨æœåŠ¡å™¨æ—¶ï¼Œä½¿ç”¨: docker-compose --env-file .env.production up -d
    env_file:
      - .env.local
    
    # ä¹Ÿå¯ä»¥ç›´æ¥åœ¨è¿™é‡ŒæŒ‡å®šï¼ˆä¼šè¦†ç›–env_fileï¼‰
    # environment:
    #   - BACKEND_API_URL=http://127.0.0.1:9300
    
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:9200/health"]
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 30s  # ç»™äºˆ30ç§’å¯åŠ¨æ—¶é—´

# â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
# ä½¿ç”¨è¯´æ˜
# â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
# 
# ğŸ  æœ¬åœ°/å±€åŸŸç½‘ç¯å¢ƒï¼ˆé»˜è®¤ï¼‰ï¼š
#    docker-compose up -d --build
#    æˆ–
#    docker-compose --env-file .env.local up -d --build
# 
# ğŸŒ å¤–éƒ¨æœåŠ¡å™¨ç¯å¢ƒï¼š
#    docker-compose --env-file .env.production up -d --build
# 
# ğŸ“ é…ç½®æ–‡ä»¶ï¼š
#    - .env.local       : å±€åŸŸç½‘é…ç½®ï¼ˆä½¿ç”¨ 127.0.0.1:9300ï¼‰
#    - .env.production  : ç”Ÿäº§ç¯å¢ƒé…ç½®ï¼ˆä½¿ç”¨ llmhi.com:9300ï¼‰
# 
# ğŸ”§ è‡ªå®šä¹‰é…ç½®ï¼š
#    ç¼–è¾‘å¯¹åº”çš„ .env æ–‡ä»¶ï¼Œä¿®æ”¹ BACKEND_API_URL å³å¯
# 
# â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
